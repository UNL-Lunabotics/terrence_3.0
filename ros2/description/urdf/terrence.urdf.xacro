<?xml version="1.0" encoding="utf-8"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="LilT_Combined_URDF">

  <xacro:arg name="use_ros2_control" default="true"/>
  <xacro:arg name="sim_mode" default="false"/>

  <xacro:if value="$(arg use_ros2_control)">
      <xacro:include filename="ros2_control.xacro"/>
  </xacro:if>
  <xacro:unless value="$(arg use_ros2_control)">
      <xacro:include filename="gazebo_control.xacro"/>
  </xacro:unless>

  <link name="base_link" />
  <link name="base_footprint" />
  <joint name="base_joint" type="fixed">
    <parent link="base_link" />
    <child link="base_footprint" />
    <origin xyz="0 0 0" rpy="0 0 0" />
  </joint>

  <link name="Base">
    <inertial>
      <origin xyz="0.0071933 0.035942 -0.37341" rpy="0 0 0" />
      <mass value="2.0994" />
      <inertia ixx="0.0052099" ixy="-7.8944E-22" ixz="-4.9264E-20" iyy="0.0060071" iyz="3.293E-21"
        izz="0.0014684" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/Base.STL" />
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/Base.STL" />
      </geometry>
    </collision>
  </link>
  <joint name="Baseplate_joint" type="fixed">
    <origin xyz="0 0 0" rpy="${pi/2} 0 0" />
    <parent link="base_link" />
    <child link="Base" />
  </joint>

  <gazebo reference="Base">
    <material>Gazebo/White</material>
  </gazebo>

  <link name="DriverWheel">
    <inertial>
      <origin xyz="-0.030264 6.665E-05 1.2263E-10" rpy="0 0 0" />
      <mass value="0.046607" />
      <inertia ixx="3.7938E-05" ixy="-6.4305E-20" ixz="-1.3428E-19" iyy="1.9406E-05"
        iyz="2.6768E-13" izz="1.9256E-05" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/DriverWheel.STL" />
      </geometry>
      <material name="">
        <color rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/DriverWheel.STL" />
      </geometry>
    </collision>
  </link>
  <joint name="DW_Joint" type="continuous">
    <origin xyz="0.17907 -0.0127 -0.0127" rpy="0 0 0" />
    <parent link="Base" />
    <child link="DriverWheel" />
    <axis xyz="1 0 0" />
    <limit effort="10" velocity="0" />
  </joint>

  <gazebo reference="DriverWheel">
    <material>Gazebo/Blue</material>
      <mu1 value="0.001"/>
      <mu2 value="0.001"/>
  </gazebo>

  <link name="DriverSprocket">
    <inertial>
      <origin xyz="0.0097746 -3.5292E-09 -5.2457E-08" rpy="0 0 0" />
      <mass value="0.054042" />
      <inertia ixx="5.3673E-05" ixy="-1.8152E-12" ixz="1.8049E-14" iyy="2.7245E-05"
        iyz="-1.9672E-11" izz="2.7245E-05" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/DriverSprocket.STL" />
      </geometry>
      <material name="">
        <color rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/DriverSprocket.STL" />
      </geometry>
    </collision>
  </link>
  <joint name="DS_Joint" type="continuous">
    <origin xyz="0.14605 -0.012431 -0.25959" rpy="0 0 0" />
    <parent link="Base" />
    <child link="DriverSprocket" />
    <axis xyz="1 0 0" />
    <limit effort="10" velocity="10" />
  </joint>

  <gazebo reference="DriverSprocket">
    <material>Gazebo/Blue</material>
  </gazebo>

  <link name="PassWheel">
    <inertial>
      <origin xyz="0.020612 8.4006E-05 -0.00023239" rpy="0 0 0" />
      <mass value="0.046607" />
      <inertia ixx="3.7938E-05" ixy="-6.4876E-20" ixz="-1.3466E-19" iyy="1.9406E-05"
        iyz="-3.2644E-10" izz="1.9256E-05" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/PassWheel.STL" />
      </geometry>
      <material name="">
        <color rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/PassWheel.STL" />
      </geometry>
    </collision>
  </link>
  <joint name="PW_Joint" type="continuous">
    <origin xyz="-0.17907 -0.0127 -0.0127" rpy="0 0 0" />
    <parent link="Base" />
    <child link="PassWheel" />
    <axis xyz="1 0 0" />
    <limit effort="10" velocity="0" />
  </joint>

  <gazebo reference="PassWheel">
    <material>Gazebo/Blue</material>
      <mu1 value="0.001"/>
      <mu2 value="0.001"/>
  </gazebo>

  <link name="PassSprocket">
    <inertial>
      <origin xyz="-0.0056813 -3.6211E-09 -5.2434E-08" rpy="0 0 0" />
      <mass value="0.054042" />
      <inertia ixx="5.3673E-05" ixy="-1.8152E-12" ixz="2.2008E-14" iyy="2.7245E-05"
        iyz="-2.0018E-11" izz="2.7245E-05" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/PassSprocket.STL" />
      </geometry>
      <material name="">
        <color rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/PassSprocket.STL" />
      </geometry>
    </collision>
  </link>
  <joint name="PS_Joint" type="continuous">
    <origin xyz="-0.14605 -0.012969 -0.25959" rpy="0 0 0" />
    <parent link="Base" />
    <child link="PassSprocket" />
    <axis xyz="1 0 0" />
    <limit effort="10" velocity="10" />
  </joint>

  <gazebo reference="PassSprocket">
    <material>Gazebo/Blue</material>
  </gazebo>

  <link name="Loader">
    <inertial>
      <origin xyz="-0.14124 -0.17161 0.14187" rpy="0 0 0" />
      <mass value="1.4896" />
      <inertia ixx="0.011793" ixy="-2.9875E-05" ixz="2.4692E-05" iyy="0.020991" iyz="0.0052507"
        izz="0.024104" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/Loader.STL" />
      </geometry>
      <material name="">
        <color rgba="1 0 0 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/Loader.STL" />
      </geometry>
    </collision>
  </link>
  <joint name="LoaderJoint" type="revolute">
    <origin xyz="0.14135 0.20066 -0.03683" rpy="0 0 0" />
    <parent link="Base" />
    <child link="Loader" />
    <axis xyz="-1 0 0" />
    <limit lower="0" upper="1.571" effort="10" velocity="0.7854" />
  </joint>

  <gazebo reference="Loader">
    <material>Gazebo/Red</material>
    <mu1 value="0.001"/>
    <mu2 value="0.001"/>
  </gazebo>

  <link name="Hopper">
    <inertial>
      <origin xyz="-0.079042 0.080085 0.065194" rpy="0 0 0" />
      <mass value="0.29528" />
      <inertia ixx="0.002494" ixy="3.9471E-05" ixz="3.2132E-05" iyy="0.0032471" iyz="-0.00071427"
        izz="0.0022122" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/Hopper.STL" />
      </geometry>
      <material name="">
        <color rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/Hopper.STL" />
      </geometry>
    </collision>
  </link>
  <joint name="HopperJoint" type="revolute">
    <origin xyz="0.076774 0.05207 -0.3429" rpy="0 0 0" />
    <parent link="Base" />
    <child link="Hopper" />
    <axis xyz="-1 0 0" />
    <limit lower="0" upper="0.785" effort="10" velocity="0.3927" />
  </joint>

  <gazebo reference="Hopper">
    <material>Gazebo/White</material>
  </gazebo>

  <link name="Door">
    <inertial>
      <origin xyz="-0.09525 -0.062153 -0.013449" rpy="0 0 0" />
      <mass value="0.067736" />
      <inertia ixx="0.00011563" ixy="1.0111E-19" ixz="1.4928E-21" iyy="0.00020595" iyz="-1.1678E-05"
        izz="0.00031894" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/Door.STL" />
      </geometry>
      <material name="">
        <color rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file://$(find terrence_2)/description/meshes/Door.STL" />
      </geometry>
    </collision>
  </link>
  <joint name="DoorJoint" type="revolute">
    <origin xyz="0.014539 0.1397 -0.033006" rpy="0 0 0" />
    <parent link="Hopper" />
    <child link="Door" />
    <axis xyz="1 0 0" />
    <limit lower="0" upper="0.3927" effort="0" velocity="0" />
  </joint>

  <gazebo reference="Door">
    <material>Gazebo/White</material>
  </gazebo>

</robot>